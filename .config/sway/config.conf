#### Default openSUSE config for sway
# Copy this to ~/.config/sway/config.d/
# or leave `include /etc/sway/config.d/*`
# in your local config file

# Keyboard

    input * {
	xkb_layout "it"
	xkb_model "pc101"
	    }

# Enable common options for generic touchpads
input "type:touchpad" {
  tap enabled
  natural_scroll enabled
  middle_emulation enabled
}

# Gestures
bindgesture swipe:right workspace prev
bindgesture swipe:left workspace next
bindgesture swipe:down exec sway-new-workspace open; exec $menu

# Cycle through workspaces
bindsym $mod+tab workspace next_on_output
bindsym $mod+Shift+tab workspace prev_on_output

# Lockscreen configuration
# set $screenlock 'swaylock -e -f --key-hl-color c8d3f5 --ring-color 222436 --line-color 00000000 --line-wrong-color 00000000 --inside-color 00000000 --inside-wrong-color 00000000 --ring-wrong-color ff757f --text-color c8d3f5 --text-wrong-color c8d3f5 --line-ver-color 222436 --text-ver-color c8d3f5 --ring-ver-color 222436 --inside-ver-color 00000000 -i /home/lptlv/.config/sway/tokyofloyd-blur.png'

set $screenlock 'cd /home/lptlv/Pictures/Screenshots && grim lock.png && ffmpeg -i lock.png -vf "boxblur=18" -c:a copy lock1.png && swaylock -e -f --key-hl-color c8d3f5 --ring-color 222436 --line-color 00000000 --line-wrong-color 00000000 --inside-color 00000000 --inside-wrong-color 00000000 --ring-wrong-color ff757f --text-color c8d3f5 --text-wrong-color c8d3f5 --line-ver-color 222436 --text-ver-color c8d3f5 --ring-ver-color 222436 --inside-ver-color 00000000 -i /home/lptlv/Pictures/Screenshots/lock1.png'

# Idle configuration
exec swayidle -w \
         timeout 1200 $screenlock \
	 timeout 1203 'rm -rf /home/lptlv/Pictures/Screenshots/lock*' \
         timeout 1800 'swaymsg "output * dpms off"' \
	 timeout 1810 'systemctl suspend' \
              resume 'swaymsg "output * dpms on"' \
         before-sleep $screenlock

bindsym --to-code {
    $mod+b splith
    $mod+v splitv
}

# Media keys
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

bindsym XF86MonBrightnessDown exec brightnessctl -q set 5%- && ( echo $((`brightnessctl get` * 100 / `brightnessctl m`)) > $SWAYSOCK.wob )

bindsym XF86MonBrightnessUp exec brightnessctl -q set +5% && ( echo $((`brightnessctl get` * 100 / `brightnessctl m`)) > $SWAYSOCK.wob )

bindsym XF86AudioRaiseVolume exec pamixer --allow-boost -ui 2 && dc -e "[`pamixer --get-volume`]sM 100d `pamixer --get-volume`<Mp" > $SWAYSOCK.wob

bindsym XF86AudioLowerVolume exec pamixer --allow-boost -ud 2 && dc -e "[`pamixer --get-volume`]sM 100d `pamixer --get-volume`<Mp" > $SWAYSOCK.wob

bindsym XF86AudioMute exec pamixer --toggle-mute && ( pamixer --get-mute && echo 0 > $SWAYSOCK.wob )

# Media player controls
bindsym --no-warn XF86AudioPlay exec playerctl play-pause
bindsym --no-warn XF86AudioNext exec playerctl next
bindsym --no-warn XF86AudioPrev exec playerctl previous

# Screenshot
bindsym Print exec grim -g "$(slurp)" "$(xdg-user-dir PICTURES)/Screenshots/$(date +'%y%m%d-%H%M%S'.png)"

# Toggle notification bar
set $toggle_notification "swaync-client -t -sw"
bindsym $mod+Shift+n exec $toggle_notification

set $wob wob --config ~/.config/sway/wob/wob.ini

# Other apps

  # Calculator
  bindsym XF86Calculator exec kcalc

exec_always {

    # Desktop settings
    systemctl --user import-environment
    gsettings set org.gnome.desktop.default-applications.terminal 'alacritty'
    gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita-dark'
    gsettings set org.gnome.desktop.interface icon-theme 'Papirus-Dark'
    gsettings set org.gnome.desktop.interface cursor-theme 'macOS-BigSur-White'
    test -e $SWAYSOCK.wob || mkfifo $SWAYSOCK.wob
    tail -f $SWAYSOCK.wob | $wob
    swaync --style ~/.config/swaync/style.css --config ~/.config/swaync/config.json

    # Workflow behavior
    swayless init
    autotiling --limit 2
}

# Applications
exec firefox
exec dolphin
exec youtube-music

# Seat
seat seat0 xcursor_theme macOS-BigSur-White 24

# Exec
  exec /usr/libexec/polkit-gnome-authentication-agent-1

  # Update notification
  exec /home/lptlv/.config/sway/scripts/update.sh

# Include
include /home/lptlv/.cargo/bin
